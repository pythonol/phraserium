import{Q as P,a as h,b as E,c as S}from"./QPage-WdhGQJ1H.js";import{Q as B}from"./QItem-WWA4M9F1.js";import{_ as N,B as Q,K as y,u as m,H as u,G as t,F as o,I as b,E as n,J as w,L as g,M as O,Q as r,C as k,N as f,O as I,P as L,R as C,S as M,T as U,U as q,V as v,W as G}from"./index--utqa5md.js";import{Q as T}from"./QExpansionItem-5nemuj0T.js";import{Q as A}from"./QList-2VH3qJop.js";import{G as H,E as W}from"./EntriesList-BbtkIozN.js";import{D as j,a as z}from"./DrawerToggleBtn-CCuN9Ei5.js";import"./QResizeObserver-Mz_cIb5B.js";import"./QImg-aex-8g38.js";import"./use-quasar-B7eA8zwh.js";import"./selection-CS0ugvdd.js";import"./format-CJebrXOQ.js";const K={__name:"FavoritesPage",setup(i,{expose:s}){s();const x=Q(),e=y(),c=m(!1),l=m(null),a=m(""),d=m(!1),_=()=>c.value=!0,p=()=>c.value=!1;function D(V){l.value=V,a.value=V.name,_()}const F={storeSettings:x,storeFavorites:e,dialogVisible:c,currentFav:l,name:a,commentsExpanded:d,openEditor:_,closeEditor:p,onEditFav:D,onSaveFav:()=>{l.value.name!==a.value&&(l.value.name=a.value,l.value.save()),p()},onDeleteFav:async()=>{await e.remove(l.value),p()},ref:m,get useStoreSettings(){return Q},get useStoreFavorites(){return y},GramSelector:H,DrawerMenu:j,DrawerToggleBtn:z,EntriesList:W};return Object.defineProperty(F,"__isScriptSetup",{enumerable:!1,value:!0}),F}},J={class:"text-center"},R={key:1,class:"absolute-center text-grey text-center"};function X(i,s,x,e,c,l){return n(),u(b,null,[t(e.DrawerMenu),t(P,{elevated:""},{default:o(()=>[t(E,null,{default:o(()=>[t(e.DrawerToggleBtn),t(S,null,{default:o(()=>[w("div",J,g(i.$t("–ò–∑–±—Ä–∞–Ω–Ω–æ–µ")),1)]),_:1}),t(e.GramSelector)]),_:1})]),_:1}),t(h,{class:"q-py-xs"},{default:o(()=>[t(A,null,{default:o(()=>[(n(!0),u(b,null,O(e.storeFavorites.allOrdered,a=>(n(),u("div",{key:a.id},[t(T,{modelValue:a.expanded,"onUpdate:modelValue":[d=>a.expanded=d,d=>a.save()],"switch-toggle-side":""},{header:o(()=>[t(B,{class:"text-h6 text-primary"},{default:o(()=>[C(g(a.name),1)]),_:2},1024),t(v,{icon:"edit",class:"absolute-end q-mx-sm q-mt-sm backdim",onClick:G(d=>e.onEditFav(a),["stop"]),size:"sm",round:""},null,8,["onClick"])]),default:o(()=>[t(r),t(e.EntriesList,{entries:a.entryIds,favorite:a,withTopic:""},null,8,["entries","favorite"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),a.expanded?f("",!0):(n(),k(r,{key:0}))]))),128))]),_:1}),t(T,{label:"–ú–æ–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏",modelValue:e.commentsExpanded,"onUpdate:modelValue":[s[0]||(s[0]=a=>e.commentsExpanded=a),s[1]||(s[1]=a=>e.storeFavorites.loadEntriesWithComments(e.commentsExpanded))],"header-class":"text-h6","switch-toggle-side":""},{default:o(()=>[t(r),t(e.EntriesList,{entries:e.storeFavorites.entriesWithComments,withTopic:""},null,8,["entries"])]),_:1},8,["modelValue"]),e.commentsExpanded?f("",!0):(n(),k(r,{key:0})),!e.commentsExpanded&&!Object.keys(e.storeFavorites.entryFavsMap).length?(n(),u("div",R,s[5]||(s[5]=[w("span",null,"üëâ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∂–µ—Å—Ç swipe –≤–ø—Ä–∞–≤–æ, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —Ñ—Ä–∞–∑—É –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ",-1)]))):f("",!0),t(I,{modelValue:e.dialogVisible,"onUpdate:modelValue":s[4]||(s[4]=a=>e.dialogVisible=a),dir:e.storeSettings.dir.dir,position:i.$constants.POPUP_POSITION},{default:o(()=>[t(L,{class:"q-dialog-plugin"},{default:o(()=>[t(E,{class:"q-px-sm"},{default:o(()=>[t(S,{class:"text-primary"},{default:o(()=>[C(g(i.$t("–ò–∑–±—Ä–∞–Ω–Ω–æ–µ")),1)]),_:1})]),_:1}),t(r),t(M,{class:"q-px-lg"},{default:o(()=>[t(U,{modelValue:e.name,"onUpdate:modelValue":s[2]||(s[2]=a=>e.name=a),maxlength:i.$constants.FAV_NAME_MAX_LENGTH,placeholder:"–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ",outlined:"",dense:"",autofocus:"",style:{"font-size":"100%"},onBlur:s[3]||(s[3]=a=>e.name=e.name.trim())},null,8,["modelValue","maxlength"])]),_:1}),t(r),t(q,{class:"items-stretch no-wrap"},{default:o(()=>[t(v,{label:"OK",class:"col-grow",style:{"max-width":"120px"},color:"primary",onClick:e.onSaveFav}),t(v,{label:"–£–¥–∞–ª–∏—Ç—å",icon:"delete","text-color":"red-8",onClick:e.onDeleteFav}),t(v,{label:"–û—Ç–º–µ–Ω–∞",icon:"cancel",onClick:e.closeEditor})]),_:1})]),_:1})]),_:1},8,["modelValue","dir","position"])]),_:1})],64)}const ce=N(K,[["render",X],["__file","FavoritesPage.vue"]]);export{ce as default};
